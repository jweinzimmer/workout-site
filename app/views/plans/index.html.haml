.small-8.columns
	%div
		#calendar
			
			#wrap
	#external-events
		%h4 Draggable Events
		- @plans.each do |plan|
			.external-event= link_to plan.name, plan
		%p
			%input#drop-remove{type: "checkbox"}/
			%label{for: "drop-remove"} remove after drop
:javascript
	$('#external-events div.external-event').each(function() {

	var eventObject = {
	title: $.trim($(this).text()) 
	};

	$(this).data('eventObject', eventObject);


	$(this).draggable({
	zIndex: 999,
	revert: true,  
	revertDuration: 0 
	});

	});

	$('#calendar').fullCalendar({

	editable: true,
	eventDrop: function(event,dayDelta,minuteDelta,allDay,revertFunc) {
	$.ajax({
	type:"PUT",
	url: "/events/"+event.id,
	data: "minute_delta="+minuteDelta+"&day_delta="+dayDelta,
	});
	},



























	header: {
	left: 'prev,next today',
	center: 'title',
	right: 'month,agendaWeek,agendaDay'
	},
	editable: true,
	droppable: true,
	drop: function(date, allDay) { 

	
	var originalEventObject = $(this).data('eventObject');

	
	var copiedEventObject = $.extend({}, originalEventObject);

	
	copiedEventObject.start = date;
	copiedEventObject.allDay = allDay;



	$('#calendar').fullCalendar('renderEvent', copiedEventObject, true);


	if ($('#drop-remove').is(':checked')) {

	$(this).remove();
	}

	},

	events: [
	{		
	
	title: 'heasdsy',
	start: '2014-04-10',
	url: 'http://localhost:3000/plans'
	
	}

	        ],
	        eventClick: function(event) {
	        if (event.url) {
	        window.open(event.url);
	        return false;
	        }
	        }
	        });
